<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Name       : Brown Stone  
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20100928

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>梦呓 - Articles by IllusiveMan</title>
<link href="../theme/css/style.css" rel="stylesheet" type="text/css" media="screen" />
<link href="../" type="application/atom+xml" rel="alternate" title="梦呓 ATOM Feed" />
</head>
<body>
<div id="wrapper">
	<div id="page">
		<div id="page-bgtop">
			<div id="page-bgbtm">
 
        
				<div id="content">
					<div class="post">
						<h2 class="title"><a href="../shi-yong-zeitbu-shu-pelicanbo-ke.html">使用ZEIT部署Pelican博客</a></h2>
						<p class="meta"><span class="date">At 六 09 十一月 2019 </span><span class="posted">By <a href="#">IllusiveMan</a></span><span>&nbsp; | Category : <a href="../category/jiao-cheng.html">教程</a></span></p>
					<p class="meta">Tags : <span><a href="../tag/zeit.html">ZEIT</a> / </span>
<span><a href="../tag/blog.html">blog</a> / </span>
<span><a href="../tag/jiao-cheng.html">教程</a> / </span>
</p>
						<div style="clear: both;">&nbsp;</div>
						<div class="entry">
						 <p>ZEIT是一个静态页面托管服务，类似于Netlify和GitHub Page。虽然Pelican可以正常运行在ZEIT，但很遗憾的是，ZEIT对Pelican并没有优化支持，而Hexo之类是支持的。没办法，谁让ZEIT是做js起家的呢……</p>
<p>ZEIT支持自动构建，也就是说，允许我们使用Pelican工程（托管在Git）并在每次push时自动调用命令构建静态页面，就像在GitHub Page使用Jekyll一样（GitHub不支持Pelican自动构建，要用就得只上传构建好的静态页面）。
为什么自动构建比手动构建后上传静态页面文件好呢？因为如果支持从GitHub自动构建，我们就可以脱离本地环境，直接在GitHub上面用WebIDE写文章了。毕竟在新设备重新配置环境挺烦的，我们要的只是写文章而已。</p>
<p>ZEIT官方给出了Pelican的构建示例：<a class="reference external" href="https://github.com/zeit/now-examples/tree/master/pelican">zeit/now-examples</a>
和Netlify一样，ZEIT的构建也是依托于package.json的。官方的该文件内容如下：</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
<span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;pelican&quot;</span><span class="p">,</span>
<span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="nt">&quot;private&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A Pelican project, ready for deployment with ZEIT Now.&quot;</span><span class="p">,</span>
<span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;index.js&quot;</span><span class="p">,</span>
<span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;build&quot;</span><span class="p">:</span> <span class="s2">&quot;pelican ./ -o public -s publishconf.py&quot;</span>
<span class="p">},</span>
<span class="nt">&quot;keywords&quot;</span><span class="p">:</span> <span class="p">[],</span>
<span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;ISC&quot;</span>
<span class="p">}</span>
</pre></div>
<p>可以看到，build这条命令直接调用了Pelican。我平时都是用Makefile，里面会自动填写一些东西。如果直接使用官方的这个命令，会出现什么样的结果呢？我们来看一下Pelican的命令格式：</p>
<p><cite>pelican SOURCE_DIR -o OUTPUT_DIR -s CONF_FILE</cite></p>
<p>可以看到，ZEIT的示例中将源文件目录设置为./，也就是整个工程的根目录。这样做会导致很多无关文件被纳入构建，报一堆错误。Pelican一般是在根目录建立一个content文件夹，将文章的源文件存储在里面；而输出目录是public，这个不用改。尽管Pelican默认是用一个output目录，但ZEIT不像Netlify，它不允许用户自行制定静态页面的产出目录，而是默认使用public目录。即便我们在ZEIT查看整个工程，我们也会发现输出目录不会是我们提供的output目录。这个不用管。</p>
<p>综上，build命令应当是：<cite>pelican content -o public -s publishconf.py</cite>。</p>
	
						</div>
					</div>
	
			                <div class="post">
			                        <h2 class="title">Other articles</h2>
			                </div>
        
 
			                <div class="post summary">
						<h2 class="title"><a href="../qian-yi-dao-xin-bo-ke.html">迁移到新博客</a></h2>
						<p class="meta"><span class="date">At 四 07 十一月 2019</span><span class="posted">By <a href="#">IllusiveMan</a></span></p>
						<div style="clear: both;">&nbsp;</div>
						<div class="entry">
						 <p class="first last">Short version for index and feeds</p>
	
						 <a class="readmore" href="../qian-yi-dao-xin-bo-ke.html">Read More …</a>
						</div>
					</div>
        
 
			                <div class="post summary">
						<h2 class="title"><a href="../my-super-post.html">pelican test</a></h2>
						<p class="meta"><span class="date">At 四 07 十一月 2019</span><span class="posted">By <a href="#">IllusiveMan</a></span></p>
						<div style="clear: both;">&nbsp;</div>
						<div class="entry">
						 <p class="first last">Short version for index and feeds</p>
	
						 <a class="readmore" href="../my-super-post.html">Read More …</a>
						</div>
					</div>
        
 
			                <div class="post summary">
						<h2 class="title"><a href="../xun-huan-sai-ri-cheng-biao-wen-ti-xiang-jie.html">循环赛日程表问题详解</a></h2>
						<p class="meta"><span class="date">At 三 14 六月 2017</span><span class="posted">By <a href="#">IllusiveMan</a></span></p>
						<div style="clear: both;">&nbsp;</div>
						<div class="entry">
						 <p class="first last">循环赛日程表问题详解</p>
	
						 <a class="readmore" href="../xun-huan-sai-ri-cheng-biao-wen-ti-xiang-jie.html">Read More …</a>
						</div>
					</div>
					<div style="clear: both;">&nbsp;</div>
				</div>
				<div id="sidebar">
					<div id="logo">
						<h1><a href=..>梦呓</a></h1>
					</div>
					<div id="menu">
						<ul>
							<li ><a href=..>Home</a></li>
							<li ><a href="../archives.html">Archives</a></li>
						</ul>
					</div>
					<ul>
						<li>
							<h2>Categories</h2>
							<ul>
								 <li ><a href="../category/jiao-cheng.html">教程</a></li>
								 <li ><a href="../category/suan-fa.html">算法</a></li>
								 <li ><a href="../category/test.html">test</a></li>
								 <li ><a href="../category/wei-fen-lei.html">未分类</a></li>
							</ul>
						</li>
						<li>
							<h2>Blogroll</h2>
							<ul>
                                                            <li><a href="http://getpelican.com/">Pelican</a></li>
                                                            <li><a href="http://python.org/">Python.org</a></li>
                                                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                                                            <li><a href="#">You can modify those links in your config file</a></li>
							</ul>
						</li>
                                                <li>
                                                        <h2>Social</h2>
                                                        <ul>
                                                            <li><a href="../" rel="alternate">Flux Atom</a></li>
                                                            <li><a href="#">You can add links in your config file</a></li>
                                                            <li><a href="#">Another social link</a></li>
                                                            <li><a href="https://github.com/DEAGS3000">GitHub</a></li>
                                                        </ul>
                                                </li><!-- /.social -->
						<li>
						        <h2>Tags</h2>
						        <ul>
                                                                <li><a href="../tag/zeit.html">ZEIT</a></li>
                                                                <li><a href="../tag/blog.html">blog</a></li>
                                                                <li><a href="../tag/jiao-cheng.html">教程</a></li>
                                                                <li><a href="../tag/shuo-ming.html">说明</a></li>
                                                                <li><a href="../tag/test.html">test</a></li>
                                                                <li><a href="../tag/suan-fa.html">算法</a></li>
						        </ul>
						</li>
						
						
					</ul>
				</div>
				<!-- end #sidebar -->
				<div style="clear: both;">&nbsp;</div>
			</div>
		</div>
	</div>
	<!-- end #page -->

<div id="footer">
	<p>Copyright (c) 2008 Sitename.com. All rights reserved. Design by <a href="http://www.freecsstemplates.org/">CSS Templates</a>.</p>
	<p>Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
</p>
</div>
<!-- end #footer -->
</body>
</html>